<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>注册</title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/common.css" />
		<link rel="stylesheet" href="css/sign.css" />
		<script src="js/jquery-1.11.3.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="http://static.runoob.com/assets/jquery-validation-1.14.0/lib/jquery.js"></script>
   		<script src="http://static.runoob.com/assets/jquery-validation-1.14.0/dist/jquery.validate.min.js"></script>
   		<script src="http://static.runoob.com/assets/jquery-validation-1.14.0/dist/localization/messages_zh.js"></script>
    <style>
    .error{
		color:blue;
	}
	</style>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left nav_bg"><span>返回</span></a>
			<h1 class="mui-title">注册</h1>
		</header>
		<div class="mui-content" style="position: relative;">
			<div class="login_logo">
				智能商城
			</div>
			<div class="mui-card-content-inner">
				<div id="valid" class="box active">
					<div class="input">
						<form class="cmxform" id="login-form" method="get" action="">
   							 <div class="mui-input-row">
								<div class="login_icon">
									<img src="img/username.png" />
								</div>
						        <input id="firstname" name="firstname" type="text" placeholder="请输入用户名">
							</div>
						    <div class="mui-input-row">
								<div class="login_icon">
								    <img src="img/valid.png" />
								</div>
						        <input id="password" name="password" type="password" placeholder="请输入密码">
							</div>
						    <div class="mui-input-row">
								<div class="login_icon">
								    <img src="img/valid.png" />
								</div>
						        <input id="confirm_password" name="confirm_password" type="password" placeholder="请确认密码">
							</div>
						    <button id='sign' class="sign" type="submit">注册</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
</body>
</html>
<script>
$().ready(function() {
// 在键盘按下并释放及提交后验证提交表单
  $("#login-form").validate({
	    rules: {
	      firstname: "required",
	     
	      password: {
	        required: true,
	        minlength: 5
	      },
	      confirm_password: {
	        required: true,
	        minlength: 5,
	        equalTo: "#password"
	      },
	    
	    },
	    messages: {
	      firstname: "请输入您的用户名",
	      password: {
	        required: "请输入密码",
	        minlength: "密码长度不能小于 5 个字母"
	      },
	      confirm_password: {
	        required: "请输入密码",
	        minlength: "密码长度不能小于 5 个字母",
	        equalTo: "两次密码不一致"
	      },
	     
	    }
	});
});
</script>
<script>
	mui.init({
			swipeBack:true //启用右滑关闭功能
	});
	
    $("#confirm_password").blur(function(){
    	var uname=$("#firstname").val();
    	var upass=$("#password").val();
    	var upass2=$("#confirm_password").val();
        if(upass !=""&&uname !=""&&upass==upass2){
    		$("#sign").addClass("active2");
    	}
	});
    
    $("#sign").click(function(){
     	var uname=$("#firstname").val();
        var upass=$("#password").val();
    mui.plusReady(function(){
   		mui.ajax('http://rufeng2.duapp.com/shuju9.php?firstname='+uname+'&password='+upass, {
			data: "{}",
			async: false,
			dataType: 'json', //服务器返回json格式数据
			type: 'post', //HTTP请求类型
			timeout: 10000, //超时时间设置为10秒；
			headers: {
				'Content-Type': 'application/json'
			},
			success: function(data) {
     			mui.toast("注册成功");
			},
        	error: function(xhr,type,errorThrown) {
     			mui.toast("网络连接错误！");
        	}
		})
    })
    });

</script>
